<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title data-i18n="page_title">Privacy Policy — Light Side</title>
  <link rel="icon" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#5f4088">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flag-icons@7.5.0/css/flag-icons.min.css">
  <style>
    :root{ --accent:#ff9f1b; --base:#5f4088; --ink:#0b0b0f; --paper:#ffffff; }
    html,body{margin:0;padding:0;background:#170f24;color:#f7f7fb;font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
    a{color:var(--accent);text-decoration-thickness:.08em;text-underline-offset:.18em}
    ::selection{background:var(--accent);color:#111}
    .wrap{max-width:980px;margin:0 auto;padding:24px}
    .card{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:16px}
    .header{position:sticky;top:0;z-index:10;backdrop-filter:blur(8px);background:rgba(95,64,136,.65);border-bottom:1px solid rgba(255,255,255,.15);transition:transform .24s ease, box-shadow .2s ease}
    .header.is-hidden{transform:translateY(-100%)}
    .header .wrap{display:flex;gap:12px;align-items:center}
    .header .logo{width:50px;height:50px;background:url("assets/light-side-logo-clear-512.png") no-repeat center/contain;flex:0 0 auto;margin-right:8px}
    .brand{display:flex;align-items:center;gap:10px;color:#fff;font-weight:800;letter-spacing:.2px;white-space:nowrap}
    .controls{margin-left:auto;display:flex;gap:8px;flex-wrap:wrap}
    .btn, select{appearance:none;background:rgba(255,255,255,.08);color:#fff;border:1px solid rgba(255,255,255,.18);border-radius:10px;padding:8px 12px;cursor:pointer}
    .btn:hover{background:rgba(255,255,255,.14)}
    .title{font-size:28px;font-weight:800;margin:22px 0 8px}
    .muted{color:#d9d9e6}
    .summary{display:grid;gap:10px;padding:12px 14px}
    .badge{display:inline-flex;align-items:center;gap:6px;background:rgba(255,159,27,.14);color:#ffd199;border:1px solid rgba(255,159,27,.35);padding:4px 8px;border-radius:10px;font-size:16px}
    details{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:16px;padding:14px 16px}
    details+details{margin-top:12px}
    summary{cursor:pointer;font-weight:700}
    h2.section{font-size:20px;margin:26px 0 8px}
    .foot{margin-top:28px;padding:14px 16px}
    .note{font-size:13px;color:#e8e8f3}
    .k{font-family:ui-monospace,Consolas,Menlo,monospace;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.18);padding:.05em .4em;border-radius:6px}
    .copy{margin-left:6px;font-size:12px}
    .grid2{display:grid;gap:10px}
    .brandline{display:flex;align-items:center;gap:10px}
    @media (max-width:640px){
      .header .wrap{flex-direction:column;align-items:stretch;gap:8px}
      .brand{order:0;width:100%;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
      .brandline{order:0}
      .controls{order:1;width:100%;display:flex;flex-wrap:wrap;gap:8px;justify-content:flex-start}
      .controls>*{flex:0 0 auto}
    }
    @media print{.header,.controls,.copy{display:none!important}body{background:#fff;color:#000}.card,details{background:#fff;border-color:#ddd}a{color:#000}}
    .lang-dd{position:relative}
    .lang-trigger{display:flex;align-items:center;gap:8px;background:linear-gradient(180deg,rgba(255,255,255,.10),rgba(255,255,255,.06));border:1px solid rgba(255,255,255,.22);color:#fff;padding:8px 12px;border-radius:12px;font-weight:600;letter-spacing:.2px;cursor:pointer;box-shadow:inset 0 0 0 1px rgba(255,255,255,.04)}
    .lang-trigger svg{opacity:.8;transition:transform .2s}
    .lang-trigger[aria-expanded="true"] svg{transform:rotate(180deg)}
    .lang-menu{position:absolute;right:0;top:110%;min-width:220px;max-height:280px;overflow:auto;padding:6px;border-radius:12px;display:none;z-index:40;background:linear-gradient(180deg, rgba(95,64,136,.98), rgba(95,64,136,.96));border:1px solid rgba(255,255,255,.15);box-shadow:0 12px 32px rgba(0,0,0,.35);backdrop-filter:blur(8px)}
    .lang-menu.open{display:block}
    .lang-option{display:flex;align-items:center;gap:10px;width:100%;padding:8px 10px;border-radius:10px;color:#fff;background:transparent;border:0;text-align:left;cursor:pointer}
    .lang-option:hover,.lang-option[aria-selected="true"],.lang-option:focus{background:rgba(255,255,255,.10);outline:2px solid transparent}
    *{scrollbar-color:var(--accent) transparent}
    *::-webkit-scrollbar{width:10px;height:10px}
    *::-webkit-scrollbar-thumb{background:var(--accent)}
    #langLabel .fi,.lang-option .fi{margin-right:8px;border-radius:2px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.25);vertical-align:-0.1em}
  </style>
</head>
<body>
<header class="header">
  <div class="wrap">
    <div class="brandline">
      <div class="logo" aria-hidden="true"></div>
      <div class="brand">Light Side</div>
    </div>
    <div class="controls">
      <div class="lang-dd">
        <button class="btn lang-trigger" id="langBtn" aria-haspopup="listbox" aria-expanded="false">
          <span id="langLabel">Language</span>
          <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true"><path d="M7 10l5 5 5-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
        <div id="langMenu" class="lang-menu" role="listbox" tabindex="-1" aria-labelledby="langBtn"></div>
      </div>
      <button class="btn" id="expandAll" data-i18n="btn_expand">Expand all</button>
      <button class="btn" id="collapseAll" data-i18n="btn_collapse">Collapse all</button>
      <button class="btn" id="print" data-i18n="btn_print">Print / Save PDF</button>
    </div>
  </div>
</header>

<main class="wrap">
  <div class="card" style="padding:18px 20px">
    <div class="title" data-i18n="pp_title">Privacy Policy</div>
    <div class="muted"><span data-i18n="updated">Effective date</span>: <span id="effective"></span></div>
    <div class="summary card" style="margin-top:14px">
      <div class="badge">✔ <div data-i18n="sum_global">Applies worldwide to our games, apps and websites.</div></div>
      <div class="badge">🧰 <div data-i18n="sum_sdks">We use widely adopted services: Firebase Analytics/Crashlytics, Google AdMob, Unity Ads, Google Play Games Services, AppsFlyer.</div></div>
      <div class="badge">🚫 <div data-i18n="sum_no_sell">We do not sell or share personal data.</div></div>
      <div class="badge">👶 <div data-i18n="sum_kids">We do not knowingly collect data from children.</div></div>
    </div>
  </div>

  <section style="margin-top:18px">
    <details open>
      <summary id="who" class="section" data-i18n="who_t">1) Who we are</summary>
      <div data-i18n="who_b"></div>
    </details>
    <details open>
      <summary id="scope" class="section" data-i18n="scope_t">2) Scope</summary>
      <div data-i18n="scope_b"></div>
    </details>
    <details>
      <summary id="data" class="section" data-i18n="data_t">3) Data we process</summary>
      <div>
        <ul>
          <li data-i18n="d_usage"></li>
          <li data-i18n="d_progress"></li>
          <li data-i18n="d_purchases"></li>
          <li data-i18n="d_ads"></li>
          <li data-i18n="d_support"></li>
        </ul>
      </div>
    </details>
    <details>
      <summary id="legal" class="section" data-i18n="legal_t">4) Purposes & legal bases</summary>
      <div data-i18n="legal_b"></div>
    </details>
    <details>
      <summary id="ads" class="section" data-i18n="optout_t">5) Advertising choices (opt-out)</summary>
      <div data-i18n="optout_b"></div>
    </details>
    <details>
      <summary id="att" class="section" data-i18n="att_t">6) Apple App Tracking Transparency (iOS)</summary>
      <div data-i18n="att_b"></div>
    </details>
    <details>
      <summary id="sdks" class="section" data-i18n="sdks_t">7) Third-party services (processors)</summary>
      <div class="grid2">
        <div><h3>Firebase Analytics / Crashlytics</h3><p data-i18n="sdk_firebase"></p></div>
        <div><h3>Google AdMob / Unity Ads</h3><p data-i18n="sdk_ads"></p></div>
        <div><h3>Google Play Games Services</h3><p data-i18n="sdk_play"></p></div>
        <div><h3>AppsFlyer</h3><p data-i18n="sdk_af"></p></div>
      </div>
      <p class="note" data-i18n="processors_note"></p>
    </details>
    <details>
      <summary id="sharing" class="section" data-i18n="share_t">8) Sharing</summary>
      <div data-i18n="share_b"></div>
    </details>
    <details>
      <summary id="intl" class="section" data-i18n="intl_t">9) International transfers</summary>
      <div data-i18n="intl_b"></div>
    </details>
    <details>
      <summary id="kids" class="section" data-i18n="kids_t">10) Children</summary>
      <div data-i18n="kids_b"></div>
    </details>
    <details>
      <summary id="rights" class="section" data-i18n="rights_t">11) Your rights</summary>
      <div data-i18n="rights_b"></div>
    </details>
    <details>
      <summary id="cookies" class="section" data-i18n="cookies_t">12) Cookies & consent</summary>
      <div data-i18n="cookies_b"></div>
    </details>
    <details>
      <summary id="accounts" class="section" data-i18n="acct_t">13) Accounts and deletion</summary>
      <div data-i18n="acct_b"></div>
    </details>
    <details>
      <summary id="ugc" class="section" data-i18n="ugc_t">14) User‑generated content (UGC) & moderation</summary>
      <div data-i18n="ugc_b"></div>
    </details>
    <details>
      <summary id="security" class="section" data-i18n="sec_t">15) Security</summary>
      <div data-i18n="sec_b"></div>
    </details>
    <details>
      <summary id="changes" class="section" data-i18n="chg_t">16) Changes</summary>
      <div data-i18n="chg_b"></div>
    </details>
    <details>
      <summary id="contact" class="section" data-i18n="ct_t">17) Contact</summary>
      <div data-i18n="ct_b"></div>
    </details>
    <details>
      <summary id="definitions" class="section" data-i18n="defs_t">18) Key definitions</summary>
      <div data-i18n="defs_b"></div>
    </details>
  </section>
  <div class="foot card">
    <div class="note"><span data-i18n="foot_note">Tip: click any section title to copy a direct link.</span>
      <button class="btn copy" id="copyLink" data-i18n="btn_copy">Copy link to this section</button>
    </div>
  </div>
</main>

<!-- i18next + plugins -->
<script src="https://unpkg.com/i18next@23.11.5/i18next.min.js"></script>
<script src="https://unpkg.com/i18next-http-backend@2.6.2/i18nextHttpBackend.min.js"></script>
<script src="https://unpkg.com/i18next-browser-languagedetector@7.2.0/i18nextBrowserLanguageDetector.min.js"></script>
<script src="https://unpkg.com/i18next-icu@2.5.0/umd/i18nextICU.min.js"></script>
<!-- Optional: locale-data for ICU plurals -->
<!-- <script src="https://unpkg.com/i18next-icu@2.5.0/locale-data/en.js"></script> -->
<!-- <script src="https://unpkg.com/i18next-icu@2.5.0/locale-data/ru.js"></script> -->

<script>
  // ===== Site settings (date/company) =====
  const SETTINGS = {
    companyName: "Light Side",
    legalEntity: "Light Side LLC",
    address: "Georgia, Tbilisi, Saburtalo district, Bakhtrioni street, N22, flat N75",
    contact: "privacy@lightside.media",
    effective: "2025-08-10",
    appsList: "Light Side Gaming Business Unit",
    hasAccounts: false,
    hasCookiesBanner: true
  };

  // ===== I18N bootstrapping (same logic as index page) =====
  const SUPPORTED = ["en","ru","nl","fi","fr","de","id","it","ms","pl","pt","es","tr"];
  const I18N_ASSETS_VERSION = "2025-08-12"; // bump to bust cache

  (function initI18next(){
    const HttpBackend = window.i18nextHttpBackend?.default || window.i18nextHttpBackend;
    const LangDetector = window.i18nextBrowserLanguageDetector?.default || window.i18nextBrowserLanguageDetector;
    const ICU = window.i18nextICU?.default || window.i18nextICU || null;
    let chain = i18next;
    if (HttpBackend) chain = chain.use(HttpBackend); else console.warn("i18next-http-backend not found");
    if (LangDetector) chain = chain.use(LangDetector); else console.warn("i18next-browser-languagedetector not found");
    if (ICU) chain = chain.use(ICU); else console.warn("i18next-icu not found; ICU plurals disabled");
    chain.init({
      debug: false,
      fallbackLng: "en",
      supportedLngs: SUPPORTED,
      nonExplicitSupportedLngs: true,
      load: "languageOnly",
      ns: ["privacy"],
      defaultNS: "privacy",
      backend: { loadPath: `locales/{{lng}}/{{ns}}.json?v=${I18N_ASSETS_VERSION}` },
      detection: { order: ["localStorage","navigator"], caches: ["localStorage"], lookupLocalStorage: "ls.locale" },
      interpolation: { escapeValue: false }
    });
  })();

  function applyI18n(){
    // Translate all [data-i18n]
    document.querySelectorAll("[data-i18n]").forEach(el => {
      const key = el.getAttribute("data-i18n");
      const html = i18next.t(key, SETTINGS); // pass settings to allow template usage
      if (html) el.innerHTML = html;
    });
    // Update document title (if bound via data-i18n on <title>)
    const titleEl = document.querySelector("title[data-i18n]");
    if (titleEl){ titleEl.textContent = i18next.t(titleEl.getAttribute("data-i18n")); }
    // Effective date localized
    const iso = SETTINGS.effective; // YYYY-MM-DD
    const [y,m,d] = iso.split("-").map(n=>parseInt(n,10));
    const dt = new Date(Date.UTC(y, m-1, d));
    try {
      document.getElementById("effective").textContent = new Intl.DateTimeFormat(i18next.language, { dateStyle: "long", timeZone: "UTC" }).format(dt);
    } catch {
      document.getElementById("effective").textContent = dt.toLocaleDateString(i18next.language, { year:"numeric", month:"long", day:"numeric", timeZone:"UTC" });
    }
  }

  i18next.on("initialized", applyI18n);
  I18nextLoadedOnce = false;
  i18next.on("loaded", () => { if (!I18nextLoadedOnce) { I18nextLoadedOnce = true; applyI18n(); } });
  i18next.on("languageChanged", applyI18n);

  // ===== Language dropdown (same UX as index) =====
  const LANGS = [["en","English","gb"],["ru","Русский","ru"],["nl","Nederlands","nl"],["fi","Suomi","fi"],["fr","Français","fr"],["de","Deutsch","de"],["id","Bahasa Indonesia","id"],["it","Italiano","it"],["ms","Bahasa Melayu","my"],["pl","Polski","pl"],["pt","Português","pt"],["es","Español","es"],["tr","Türkçe","tr"]];

  function getLangMeta(code){ const f = LANGS.find(([c])=>c===code); return f ? { code:f[0], label:f[1], flag:f[2] } : { code, label:code, flag:"us" }; }

  (function initLangDropdown(){
    const btn = document.getElementById("langBtn");
    const menu = document.getElementById("langMenu");
    const labelEl = document.getElementById("langLabel");

    function setLabel(code){ const m = getLangMeta(code); labelEl.innerHTML = `<span class="fi fi-${m.flag}"></span><span>${m.label}</span>`; }
    setLabel((i18next.language||"en").split("-")[0]);

    function render(){
      menu.innerHTML = "";
      LANGS.forEach(([code,label])=>{
        const m = getLangMeta(code);
        const opt = document.createElement("button");
        opt.type = "button"; opt.className = "lang-option"; opt.setAttribute("role","option");
        if (code === (i18next.language||"en").split("-")[0]) opt.setAttribute("aria-selected","true");
        opt.innerHTML = `<span class="fi fi-${m.flag}"></span><span>${m.label}</span>`;
        opt.addEventListener("click", ()=>{ i18next.changeLanguage(code); setLabel(code); close(); });
        menu.appendChild(opt);
      });
    }
    function open(){ render(); menu.classList.add("open"); btn.setAttribute("aria-expanded","true"); menu.focus(); }
    function close(){ menu.classList.remove("open"); btn.setAttribute("aria-expanded","false"); }
    function toggle(){ menu.classList.contains("open") ? close() : open(); }

    btn.addEventListener("click", toggle);
    document.addEventListener("click", e=>{ if(!menu.contains(e.target) && !btn.contains(e.target)) close(); });
    document.addEventListener("keydown", e=>{ if(e.key==="Escape") close(); });

    // keyboard nav
    menu.addEventListener("keydown", e=>{
      const opts = [...menu.querySelectorAll(".lang-option")];
      const idx = opts.findIndex(o=>o===document.activeElement);
      if(e.key==="ArrowDown"){ e.preventDefault(); (opts[idx+1]||opts[0]).focus(); }
      if(e.key==="ArrowUp"){ e.preventDefault(); (opts[idx-1]||opts[opts.length-1]).focus(); }
      if(e.key==="Enter" && document.activeElement.classList.contains("lang-option")){ e.preventDefault(); document.activeElement.click(); }
    });
  })();

  // ===== UI helpers =====
  function expandAll(flag){ document.querySelectorAll("details").forEach(d=>d.open = flag); }
  document.getElementById("expandAll").addEventListener("click", ()=>expandAll(true));
  document.getElementById("collapseAll").addEventListener("click", ()=>expandAll(false));
  document.getElementById("print").addEventListener("click", ()=>window.print());

  document.getElementById("copyLink").addEventListener("click", ()=>{
    const open = [...document.querySelectorAll("details")].find(d=>d.open) || document.querySelector("details");
    if(!open) return;
    const sum = open.querySelector("summary");
    const id = sum && sum.id ? sum.id : "";
    const url = location.origin + location.pathname + (id ? "#"+id : "");
    navigator.clipboard.writeText(url);
  });

  // header hide / show on scroll
  (function(){
    const header = document.querySelector('.header'); if (!header) return;
    let lastY = window.scrollY; const showOnUpDelta = 8; const startHideAfter = 64; let ticking = false;
    function onScroll(){ const y = window.scrollY; const goingDown = y > lastY; const delta = Math.abs(y - lastY);
      if (goingDown && y > startHideAfter && delta > 2) header.classList.add('is-hidden');
      else if (!goingDown && delta > showOnUpDelta) header.classList.remove('is-hidden');
      lastY = y; ticking = false; }
    window.addEventListener('scroll', () => { if (!ticking) { requestAnimationFrame(onScroll); ticking = true; } }, { passive:true });
  })();

  // click summary copies link
  [...document.querySelectorAll("summary")].forEach(s=>{
    s.addEventListener("click", (e)=>{ setTimeout(()=>{ if (e.currentTarget.parentElement.open){ const url = location.origin + location.pathname + "#" + e.currentTarget.id; navigator.clipboard.writeText(url); } }, 0); });
  });
</script>
</body>
</html>